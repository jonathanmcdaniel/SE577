
CREATE TABLE user_entity (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    phone_number TEXT NOT NULL,
    external_id BIGINT,
    group_id BIGINT NOT NULL)
WITH (OIDS = FALSE);

CREATE TABLE address (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name TEXT NOT NULL,
    line1 TEXT NOT NULL,
    line2 TEXT,
    city TEXT NOT NULL,
    state TEXT NOT NULL,
    zip TEXT NOT NULL,
    user_id BIGINT NOT NULL,
    is_billing BOOLEAN NOT NULL)
WITH (OIDS = FALSE);

CREATE TABLE groups (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    group_name TEXT NOT NULL,
    group_type VARCHAR(8) NOT NULL)
WITH (OIDS = FALSE);

CREATE TABLE orders(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    price REAL NOT NULL,
    user_id BIGINT NOT NULL REFERENCES user_entity ON DELETE RESTRICT,
    billing_id TEXT NOT NULL,
    shipping_id TEXT NOT NULL,
    payment_id TEXT NOT NULL)
WITH (OIDS = FALSE);

CREATE TABLE credit_card (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT NOT NULL,
    name TEXT NOT NULL,
    card_number TEXT NOT NULL,
    exp_month TEXT NOT NULL,
    exp_year TEXT NOT NULL,
    cvv TEXT NOT NULL)
WITH (OIDS = FALSE);