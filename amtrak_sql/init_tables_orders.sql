CREATE TABLE orders(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    price REAL NOT NULL,
    user_id BIGINT NOT NULL REFERENCES user_entity ON DELETE RESTRICT,
    billing_id TEXT NOT NULL,
    shipping_id TEXT NOT NULL,
    payment_id TEXT NOT NULL)
WITH (OIDS = FALSE);

CREATE TABLE tickets(
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    order_id BIGINT REFERENCES orders ON DELETE RESTRICT,
    departure_date DATE NOT NULL,
    from_stop TEXT NOT NULL,
    to_stop TEXT NOT NULL,
    departure_time TIME NOT NULL,
    arrival_time TIME NOT NULL,
    price REAL NOT NULL)
WITH (OIDS = FALSE);